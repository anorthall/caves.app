{% extends "base_sidebar.html" %}
{% load markdownify %}
{% block title %}{{ request.user.name }}'s profile{% endblock %}
{% block sidebar %}{% include "sidebar_users.html" %}{% endblock %}

{% block main %}
<div class="card">
  <div class="card-header fs-4">
    Your account
  </div>

  <div class="card-body p-0">
    <div class="table-responsive">
      <table class="table">
        <tbody>
          <tr>
            <th scope="row" class="ps-3 pt-3">Name</th>
            <td class="pt-3">
              {{ user.name }}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Email</th>
            <td>
              {{ user.email }}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Username</th>
            <td>
              {{ user.username }}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Location</th>
            <td>
              {% if user.location %}{{ user.location }}{% else %}Not recorded{% endif %}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Country</th>
            <td>
              {% if user.country %}{{ user.country.name }}{% else %}Not recorded{% endif %}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Club(s)</th>
            <td>
              {% if user.clubs %}{{ user.clubs }}{% else %}Not recorded{% endif %}<br /><br />
            </td>
          </tr>

          <tr class="fs-5 bg-secondary bg-gradient">
            <th class="ps-3 fw-normal" scope="col" colspan="2">Profile settings</th>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Privacy</th>
            <td>
              {{ user.privacy }}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Profile title</th>
            <td>
              {% if user.profile_page_title %}
                {{ user.profile_page_title }}
              {% else %}
                {{ user.name }}'s trips
              {% endif %}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Profile URL</th>
            <td>
              {% if user.is_public %}
                <a href="{% url 'public:user' user.username %}">https://caves.app{% url 'public:user' user.username %}</a>
              {% else %}
                Your public profile is disabled as your account is private.
              {% endif %}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Statistics</th>
            <td>
              {% if user.is_private %}
                Public statistics are disabled as your profile is private.
              {% else %}
                Statistics are {% if not user.show_statistics %}not {% endif %}shown on your profile page.
              {% endif %}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Trip notes</th>
            <td>
              {% if user.is_private %}
                If you select a trip to be public, the notes will be {% if user.private_notes %}hidden{% else %}shown{% endif %}.
              {% else %}
                {% if user.private_notes %}
                  Your trip notes are hidden.
                {% else %}
                  Your trip notes are public, unless the trip is set to private.
                {% endif %}
              {% endif %}
            </td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Biography</th>
            <td class="notes-display">
              {% if user.bio %}
                {{ user.bio|markdownify }}<br />
              {% else %}
                Not recorded
                <br /><br /><br />
              {% endif %}
            </td>
          </tr>

          <tr class="fs-5 bg-secondary bg-gradient">
            <th class="ps-3 fw-normal" scope="col" colspan="2">Site settings</th>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Timezone</th>
            <td>{{ user.timezone }}</td>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Units</th>
            <td>
              {{ user.units }}<br /><br />
            </td>
          </tr>

          <tr class="fs-5 bg-secondary bg-gradient">
            <th class="ps-3 fw-normal" scope="col" colspan="2">Account information</th>
          </tr>

          <tr>
            <th scope="row" class="ps-3">Account created</th>
            <td>{{ user.date_joined|time:"H:i" }} on {{ user.date_joined|date:"l, jS F Y (e)" }}</td>
          </tr>

          <tr>
            <th class="no-bottom-border ps-3" scope="row">Last login</th>
            <td class="no-bottom-border">{{ user.last_login|time:"H:i" }} on {{ user.last_login|date:"l, jS F Y (e)" }}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock main %}
