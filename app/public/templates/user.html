{% extends "minimal.html" %}
{% block title %}{{ user.first_name }}'s trips{% endblock %}
{% block body %}

<div class="container">
  <div class="row border-bottom border-3 border-primary mt-4">
    <h1 class="display-5">{{ user.first_name }} {{ user.last_name }}'s trips</h1>
  </div>

  <div class="row mt-3">
    <div class="col">
      {{ user.bio|linebreaks }}
    </div>
  </div>

  <div class="row mt-3">
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <th scope="col">Date</th>
            <th scope="col">Cave</th>
            <th scope="col">Region</th>
            <th scope="col">Country</th>
            <th scope="col">Duration</th>
          </tr>
        </thead>

        <tbody>
          {% for trip in trips %}
            <tr data-href="{% url 'public:trip' trip.user.username trip.pk %}">
              <td>{{ trip.start|date }}</td>
              <td>{{ trip.cave_name }}</td>
              <td>{{ trip.cave_region }}</td>
              <td>{{ trip.cave_country }}</td>
              <td>{{ trip.duration_str }}</td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <footer class="mt-3 mb-3">
    <div class="text-muted">
      Generated by <a class="text-decoration-none" href="https://caves.app/">caves.app.</a>
    </div>
  </footer>
</div>

{% endblock body %}

{% block footer_scripts %}
<!-- Clickable table rows -->
<script src="https://code.jquery.com/jquery-3.6.4.slim.min.js" integrity="sha256-a2yjHM4jnF9f54xUQakjZGaqYs/V1CYvWpoqZzC2/Bw=" crossorigin="anonymous"></script>
<script>
  jQuery(document).ready(function($) {
    $('*[data-href]').on('click', function() {
        window.location = $(this).data("href");
    });
  });
</script>
{% endblock footer_scripts %}
